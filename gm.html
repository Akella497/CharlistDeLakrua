<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/png" href="https://i.postimg.cc/XJSk855s/123.png">
<title>Диана Дриг</title>

<style>
:root{
  --bg:#060507;
  --panel:rgba(10,10,12,.6);
  --soft:rgba(255,255,255,.03);
  --text:#d6d2c8;
  --muted:#bfb7a8;
  --accent:#c9a86b;
  --radius:12px;
  --gap:1rem;
  --max:900px;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter, Trebuchet MS, Arial, sans-serif;
  padding:2rem;
  display:flex;
  justify-content:center;
  align-items:flex-start;
}

.page{
  width:100%;
  max-width:var(--max);
  background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.6));
  border-radius:18px;
  padding:1.5rem;
  border:1px solid var(--soft);
  box-shadow:0 10px 40px rgba(0,0,0,.6);
}

/* ===== HEADER ===== */
header{
  display:flex;
  justify-content: center;
  align-items:center;
  border-bottom:1px solid var(--soft);
  padding-bottom:1rem;
}

h1{
  margin:0;
  font-family:Georgia, serif;
  color:var(--accent);
  letter-spacing:.6px;
}

.sub {
    color: var(--muted);
    font-size: 17pt;
}

/* ===== PANELS ===== */
.panel{
  background:linear-gradient(180deg,rgba(255,255,255,.02),var(--panel));
  border:1px solid var(--soft);
  border-radius:var(--radius);
  padding:1rem;
}

.panel h2{
  margin:0 0 .6rem 0;
  font-size:1.05rem;
  color:var(--accent);
  text-align: center;
}

/* ===== RESONANCE ===== */
.resonance {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

.res-value{
  font-size:1.6rem;
  font-weight:700;
  min-width:48px;
  text-align:center;
}

.res-btn{
  background:rgba(255,255,255,.04);
  border:1px solid var(--soft);
  color:var(--text);
  padding:.4rem .8rem;
  border-radius:8px;
  cursor:pointer;
  transition:.15s;
}

.res-btn:hover{background:rgba(255,255,255,.08)}
.res-btn:active{transform:scale(.95)}

/* ===== FACTIONS ===== */
.factions{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:var(--gap);
}

.faction{
  display:flex;
  flex-direction:column;
  gap:.5rem;
}

.faction h3{
  margin:0;
  font-size:1rem;
  color:var(--accent);
  text-align:center;
}

.faction textarea {
    resize: vertical;
    min-height: 120px;
    background: rgba(0, 0, 0, .35);
    border: 1px solid var(--soft);
    border-radius: 10px;
    color: var(--text);
    padding: .6rem;
    font-family: inherit;
    font-size: .95rem;
    text-align: center;
}

.faction textarea::placeholder{
  color:var(--muted);
}

/* ===== LAYOUT ===== */
.main{
  display:flex;
  flex-direction:column;
  gap:1.2rem;
  margin-top:1.2rem;
}

  /* ===== РЕЗОНАНС: ЦВЕТА ===== */
.res-value{
  transition: .25s;
  border-radius: 10px;
  padding: .3rem .6rem;
}

.res-green{
  color: #9be6b4;
  background: rgba(60,120,90,.15);
  box-shadow: 0 0 10px rgba(60,180,120,.25);
}

.res-yellow{
  color: #f3d98b;
  background: rgba(160,130,40,.18);
  box-shadow: 0 0 12px rgba(240,200,80,.25);
}

.res-red{
  color: #f1a3a3;
  background: rgba(160,60,60,.2);
  box-shadow: 0 0 14px rgba(230,80,80,.35);
}
  
.header-left {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: .6rem;
}

.avatar{
  width: 190px;
  height: 260px;
  object-fit:cover;
  border-radius:12px;
  border:2px solid rgba(0,0,0,.6);
  box-shadow:
    0 6px 20px rgba(0,0,0,.6),
    inset 0 1px 0 rgba(255,255,255,.03);
}

  /* Кнопка */
.notes-toggle {
  position: fixed;
  left: 0;
  top: 40%;
  transform: translateY(-50%);
  padding: .6rem .8rem;
  background: #1e262d;
  color: #d6caa5;
  border: 1px solid rgba(180,150,90,.35);
  cursor: pointer;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  z-index: 1000;
}

/* Панель */
.notes-panel {
  position: fixed;
  top: 0;
  left: -320px;
  width: 320px;
  height: 100%;
  background: linear-gradient(
    180deg,
    rgba(30,38,45,0.95),
    rgba(12,16,20,0.98)
  );
  border-right: 1px solid rgba(180,150,90,.25);
  box-shadow: 4px 0 20px rgba(0,0,0,.6);
  transition: left .3s ease;
  z-index: 1001;
  display: flex;
  flex-direction: column;
}

.notes-panel.open {
  left: 0;
}

/* Заголовок */
.notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: .8rem 1rem;
  font-weight: 600;
  border-bottom: 1px solid rgba(180,150,90,.2);
}

.notes-header button {
  background: none;
  border: none;
  color: #d6caa5;
  font-size: 1.2rem;
  cursor: pointer;
}

/* Поле ввода */
#notesArea {
  flex: 1;
  background: transparent;
  border: none;
  padding: 1rem;
  color: #e0dcc8;
  resize: none;
  outline: none;
  font-family: inherit;
  font-size: .95rem;
}


@media(max-width:800px){
  .factions{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="page">

<header>
  <div class="header-left">
    <h1>Диана Дриг</h1>

    <img
      class="avatar"
      src="https://i.imgur.com/sLtB3sh.png"
      alt="Аватар Дианы Дриг"
    >

    <div class="sub">Химик из Ирувии</div>
  </div>
</header>


<div class="main">

  <!-- РЕЗОНАНС -->
  <section class="panel">
    <h2>Резонанс</h2>
    <div class="resonance">
      <button class="res-btn" onclick="changeRes(-1)">−</button>
      <div id="resValue" class="res-value">3</div>
      <button class="res-btn" onclick="changeRes(1)">+</button>
    </div>
  </section>

  <!-- ОТНОШЕНИЯ С ФРАКЦИЯМИ -->
  <section class="panel">
    <h2>Отношение с фракциями</h2>

    <div class="factions">

      <div class="faction">
        <h3>Улей</h3>
        <textarea id="hive" placeholder="..."></textarea>
      </div>

      <div class="faction">
        <h3>«Тень»</h3>
        <textarea id="shadow" placeholder="..."></textarea>
      </div>

      <div class="faction">
        <h3>Церковь Экстаза</h3>
        <textarea id="church" placeholder="..."></textarea>
      </div>

    </div>
  </section>
  
<!-- Кнопка открытия -->
<button id="notesToggle" class="notes-toggle">Заметки</button>

<!-- Панель заметок -->
<div id="notesPanel" class="notes-panel">
  <div class="notes-header">
    <span>Заметки персонажа</span>
    <button id="notesClose">×</button>
  </div>

  <textarea
    id="notesArea"
    placeholder="Здесь можно писать любые заметки о Диане Дриг..."
  ></textarea>
</div>

  
</div>

</div>

<script>
const STORAGE_KEY = "diana_player_sheet";

/* ===== СОСТОЯНИЕ ===== */
let state = {
  resonance: 3,
  factions: {
    hive: "",
    shadow: "",
    church: ""
  }
};

/* ===== DOM ===== */
const resEl = document.getElementById("resValue");
const hiveEl = document.getElementById("hive");
const shadowEl = document.getElementById("shadow");
const churchEl = document.getElementById("church");

/* ===== ПОДСВЕТКА РЕЗОНАНСА ===== */
function updateResColor(){
  resEl.classList.remove("res-green","res-yellow","res-red");

  if(state.resonance <= 10){
    resEl.classList.add("res-green");
  } else if(state.resonance <= 19){
    resEl.classList.add("res-yellow");
  } else {
    resEl.classList.add("res-red");
  }
}

/* ===== ЗАГРУЗКА ===== */
function loadState(){
  const saved = localStorage.getItem(STORAGE_KEY);
  if(!saved){
    updateResColor();
    return;
  }

  state = JSON.parse(saved);

  resEl.textContent = state.resonance;
  hiveEl.value = state.factions.hive;
  shadowEl.value = state.factions.shadow;
  churchEl.value = state.factions.church;

  updateResColor();
}

/* ===== СОХРАНЕНИЕ ===== */
function saveState(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

/* ===== РЕЗОНАНС ===== */
function changeRes(delta){
  state.resonance += delta;
  resEl.textContent = state.resonance;
  updateResColor();
  saveState();
}

/* ===== ТЕКСТОВЫЕ ПОЛЯ ===== */
[hiveEl, shadowEl, churchEl].forEach((el, i) => {
  const keys = ["hive", "shadow", "church"];

  el.addEventListener("input", () => {
    state.factions[keys[i]] = el.value;
    saveState();
  });
});
  
/* ===== ЗАМЕТКИ ===== */
const NOTES_KEY = "diana_notes";

const notesPanel = document.getElementById("notesPanel");
const notesToggle = document.getElementById("notesToggle");
const notesClose = document.getElementById("notesClose");
const notesArea = document.getElementById("notesArea");

/* открыть / закрыть */
notesToggle.addEventListener("click", () => {
  notesPanel.classList.add("open");
});

notesClose.addEventListener("click", () => {
  notesPanel.classList.remove("open");
});

/* загрузка */
const savedNotes = localStorage.getItem(NOTES_KEY);
if (savedNotes) {
  notesArea.value = savedNotes;
}

/* сохранение */
notesArea.addEventListener("input", () => {
  localStorage.setItem(NOTES_KEY, notesArea.value);
});

  
/* ===== СТАРТ ===== */
loadState();
</script>


</body>
</html>
