<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/png" href="https://i.postimg.cc/XJSk855s/123.png">
<title>Диана Дриг</title>

<style>
:root{
  --bg:#060507;
  --panel:rgba(10,10,12,.6);
  --soft:rgba(255,255,255,.03);
  --text:#d6d2c8;
  --muted:#bfb7a8;
  --accent:#c9a86b;
  --radius:12px;
  --gap:1rem;
  --max:900px;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter, Trebuchet MS, Arial, sans-serif;
  padding:2rem;
  display:flex;
  justify-content:center;
  align-items:flex-start;
}

.page{
  width:100%;
  max-width:var(--max);
  background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.6));
  border-radius:18px;
  padding:1.5rem;
  border:1px solid var(--soft);
  box-shadow:0 10px 40px rgba(0,0,0,.6);
}

/* ===== HEADER ===== */
header{
  display:flex;
  justify-content: center;
  align-items:center;
  border-bottom:1px solid var(--soft);
  padding-bottom:1rem;
}

h1{
  margin:0;
  font-family:Georgia, serif;
  color:var(--accent);
  letter-spacing:.6px;
}

.sub {
    color: var(--muted);
    font-size: 17pt;
}

/* ===== PANELS ===== */
.panel{
  background:linear-gradient(180deg,rgba(255,255,255,.02),var(--panel));
  border:1px solid var(--soft);
  border-radius:var(--radius);
  padding:1rem;
}

.panel h2{
  margin:0 0 .6rem 0;
  font-size:1.05rem;
  color:var(--accent);
  text-align: center;
}

/* ===== RESONANCE ===== */
.resonance {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

.res-value{
  font-size:1.6rem;
  font-weight:700;
  min-width:48px;
  text-align:center;
}

.res-btn{
  background:rgba(255,255,255,.04);
  border:1px solid var(--soft);
  color:var(--text);
  padding:.4rem .8rem;
  border-radius:8px;
  cursor:pointer;
  transition:.15s;
}

.res-btn:hover{background:rgba(255,255,255,.08)}
.res-btn:active{transform:scale(.95)}

/* ===== FACTIONS ===== */
.factions{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:var(--gap);
}

.faction{
  display:flex;
  flex-direction:column;
  gap:.5rem;
}

.faction h3{
  margin:0;
  font-size:1rem;
  color:var(--accent);
  text-align:center;
}

.faction textarea.auto-resize {
  width: 100%;
  min-height: 80px;
  max-height: 400px; /* при желании */
  background: #1e262d; /* темный фон */
  color: #d6caa5; /* золотистый текст */
  border: 1px solid rgba(180,150,90,0.25);
  border-radius: 4px;
  padding: 0.6rem;
  font-family: inherit;
  font-size: 0.95rem;
  resize: none; /* запрет на ручное изменение */
  overflow: hidden; /* скрыть скроллбар */
}



.faction textarea::placeholder{
  color:var(--muted);
}

/* ===== LAYOUT ===== */
.main{
  display:flex;
  flex-direction:column;
  gap:1.2rem;
  margin-top:1.2rem;
}

  /* ===== РЕЗОНАНС: ЦВЕТА ===== */
.res-value{
  transition: .25s;
  border-radius: 10px;
  padding: .3rem .6rem;
}

.res-green{
  color: #9be6b4;
  background: rgba(60,120,90,.15);
  box-shadow: 0 0 10px rgba(60,180,120,.25);
}

.res-yellow{
  color: #f3d98b;
  background: rgba(160,130,40,.18);
  box-shadow: 0 0 12px rgba(240,200,80,.25);
}

.res-red{
  color: #f1a3a3;
  background: rgba(160,60,60,.2);
  box-shadow: 0 0 14px rgba(230,80,80,.35);
}
  
.header-left {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: .6rem;
}

.avatar{
  width: 190px;
  height: 260px;
  object-fit:cover;
  border-radius:12px;
  border:2px solid rgba(0,0,0,.6);
  box-shadow:
    0 6px 20px rgba(0,0,0,.6),
    inset 0 1px 0 rgba(255,255,255,.03);
}

  /* Кнопка */
.notes-toggle {
  position: fixed;
  left: 0;
  top: 40%;
  transform: translateY(-50%);
  padding: .6rem .8rem;
  background: #1e262d;
  color: #d6caa5;
  border: 1px solid rgba(180,150,90,.35);
  cursor: pointer;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  z-index: 1000;
}

/* Панель */
.notes-panel {
  position: fixed;
  top: 0;
  left: -320px;
  width: 320px;
  height: 100%;
  background: linear-gradient(
    180deg,
    rgba(30,38,45,0.95),
    rgba(12,16,20,0.98)
  );
  border-right: 1px solid rgba(180,150,90,.25);
  box-shadow: 4px 0 20px rgba(0,0,0,.6);
  transition: left .3s ease;
  z-index: 1001;
  display: flex;
  flex-direction: column;
}

.notes-panel.open {
  left: 0;
}

/* Заголовок */
.notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: .8rem 1rem;
  font-weight: 600;
  border-bottom: 1px solid rgba(180,150,90,.2);
}

.notes-header button {
  background: none;
  border: none;
  color: #d6caa5;
  font-size: 1.2rem;
  cursor: pointer;
}

/* Поле ввода */
#notesArea {
  flex: 1;
  background: transparent;
  border: none;
  padding: 1rem;
  color: #e0dcc8;
  resize: none;
  outline: none;
  font-family: inherit;
  font-size: .95rem;
}

  /* ========== ОБЩИЙ СТИЛЬ СКРОЛЛБАРА ========== */
body {
  scrollbar-width: thin;       /* Firefox */
  scrollbar-color: #b4a65a #1e262d; /* Ползунок / фон */
}

/* Chrome, Edge, Safari — для всего документа */
*::-webkit-scrollbar {
  width: 6px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background: #000;
  border-radius: 999px;
}

*::-webkit-scrollbar-thumb:hover {
  background: #000;
}

*::-webkit-scrollbar-thumb:active {
  background: #000;
}

/*Заметки справа*/




/* Стили для контейнеров с overflow */
.scroll-container {
  max-height: 100%;
  overflow-y: auto;
  padding-right: 6px; /* чтобы контент не прятался за скроллбар */
}


/*Заметки2*/

  .notes-toggle-right {
  position: fixed;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  z-index: 1000;
  padding: 8px 12px;
  background: #1e262d;
  color: #d6caa5;
  border: 1px solid rgba(180,150,90,.35);
  cursor: pointer;
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

/* Панель справа */
.notes-panel-right {
  position: fixed;
  top: 0;
  right: -320px; /* спрятана за правой границей */
  width: 320px;
  height: 100%;
  background: linear-gradient(180deg, rgba(30,38,45,0.95), rgba(12,16,20,0.98));
  border-left: 1px solid rgba(180,150,90,.25);
  box-shadow: -4px 0 20px rgba(0,0,0,.6);
  transition: right 0.3s ease;
  z-index: 1001;
  display: flex;
  flex-direction: column;
}

/* Открытая панель */
.notes-panel-right.open {
  right: 0;
}

/* Заголовок */
.notes-panel-right .notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: .8rem 1rem;
  font-weight: 600;
  border-bottom: 1px solid rgba(180,150,90,.2);
}

.notes-panel-right .notes-header button {
  background: none;
  border: none;
  color: #d6caa5;
  font-size: 1.2rem;
  cursor: pointer;
}

/* textarea */
#notesAreaRight {
  flex: 1;
  background: transparent;
  border: none;
  padding: 1rem;
  color: #e0dcc8;
  resize: none;
  outline: none;
  font-family: inherit;
  font-size: .95rem;
  overflow-y: auto;
}

/* Чёрный скроллбар для textarea */
#notesAreaRight::-webkit-scrollbar {
  width: 6px;
}

#notesAreaRight::-webkit-scrollbar-track {
  background: transparent;
}

#notesAreaRight::-webkit-scrollbar-thumb {
  background: #000;
  border-radius: 999px;
}

#notesAreaRight::-webkit-scrollbar-thumb:hover {
  background: #000;
}

@media(max-width:800px){
  .factions{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="page">

<header>
  <div class="header-left">
    <h1>Диана Дриг</h1>

    <img
      class="avatar"
      src="https://i.imgur.com/sLtB3sh.png"
      alt="Аватар Дианы Дриг"
    >

    <div class="sub">Химик из Ирувии</div>
  </div>
</header>


<div class="main">

  <!-- РЕЗОНАНС -->
  <section class="panel">
    <h2>Резонанс</h2>
    <div class="resonance">
      <button class="res-btn" onclick="changeRes(-1)">−</button>
      <div id="resValue" class="res-value">3</div>
      <button class="res-btn" onclick="changeRes(1)">+</button>
    </div>
  </section>

  <!-- ОТНОШЕНИЯ С ФРАКЦИЯМИ -->
  <section class="panel">
    <h2>Отношение с фракциями</h2>

<div class="factions">

  <div class="faction">
    <h3>Улей</h3>
    <textarea class="auto-resize" id="hive" placeholder="..."></textarea>
  </div>

  <div class="faction">
    <h3>«Тень»</h3>
    <textarea class="auto-resize" id="shadow" placeholder="..."></textarea>
  </div>

  <div class="faction">
    <h3>Церковь Экстаза</h3>
    <textarea class="auto-resize" id="church" placeholder="..."></textarea>
  </div>

    <div class="faction">
    <h3>Лавка Гюстава</h3>
    <textarea class="auto-resize" id="gustav" placeholder="..."></textarea>
  </div>

</div>

  </section>
  
<!-- Кнопка открытия -->
<button id="notesToggle" class="notes-toggle">Заметки</button>

<!-- Панель заметок -->
<div id="notesPanel" class="notes-panel">
  <div class="notes-header">
    <span>Заметки персонажа</span>
    <button id="notesClose">×</button>
  </div>

  <textarea
    id="notesArea"
    placeholder="Здесь можно писать любые заметки о Диане Дриг..."
  ></textarea>
</div>


<!-- Кнопка открытия второй панели -->
<button id="notesRightToggle" class="notes-toggle-right">Заметки справа</button>

<!-- Вторая панель -->
<div id="notesPanelRight" class="notes-panel-right">
  <div class="notes-header">
    <span>Заметки справа</span>
    <button id="notesRightClose">×</button>
  </div>

  <textarea
    id="notesAreaRight"
    placeholder="Здесь можно писать заметки справа..."
  ></textarea>
</div>
  
<script>
const STORAGE_KEY = "diana_player_sheet";
const NOTES_KEY = "diana_notes";

/* ===== СОСТОЯНИЕ ===== */
let state = {
  resonance: 3,
  factions: {
    hive: "",
    shadow: "",
    church: ""
  }
};

/* ===== DOM ===== */
const resEl = document.getElementById("resValue");
const hiveEl = document.getElementById("hive");
const shadowEl = document.getElementById("shadow");
const churchEl = document.getElementById("church");

const notesPanel = document.getElementById("notesPanel");
const notesToggle = document.getElementById("notesToggle");
const notesClose = document.getElementById("notesClose");
const notesArea = document.getElementById("notesArea");

/* ===== ПОДСВЕТКА РЕЗОНАНСА ===== */
function updateResColor(){
  resEl.classList.remove("res-green","res-yellow","res-red");

  if(state.resonance <= 10){
    resEl.classList.add("res-green");
  } else if(state.resonance <= 19){
    resEl.classList.add("res-yellow");
  } else {
    resEl.classList.add("res-red");
  }
}

/* ===== ЗАГРУЗКА СОСТОЯНИЯ ===== */
function loadState(){
  const saved = localStorage.getItem(STORAGE_KEY);
  if(saved){
    state = JSON.parse(saved);
    resEl.textContent = state.resonance;
    hiveEl.value = state.factions.hive;
    shadowEl.value = state.factions.shadow;
    churchEl.value = state.factions.church;
  }

  // авто-рост текстовых полей при загрузке
  [hiveEl, shadowEl, churchEl].forEach(el => {
    el.style.height = "auto";
    el.style.height = el.scrollHeight + "px";
  });

  updateResColor();
}

/* ===== СОХРАНЕНИЕ ===== */
function saveState(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

/* ===== ИЗМЕНЕНИЕ РЕЗОНАНСА ===== */
function changeRes(delta){
  state.resonance += delta;
  resEl.textContent = state.resonance;
  updateResColor();
  saveState();
}

/* ===== ТЕКСТОВЫЕ ПОЛЯ С АВТО-РОСТОМ ===== */
[hiveEl, shadowEl, churchEl].forEach((el, i) => {
  const keys = ["hive", "shadow", "church"];

  function autoResize() {
    el.style.height = "auto";
    el.style.height = el.scrollHeight + "px";
  }

  el.addEventListener("input", () => {
    state.factions[keys[i]] = el.value;
    saveState();
    autoResize();
  });

  // начальное авто-растягивание при загрузке
  window.addEventListener("load", autoResize);
});

/* ===== ПАНЕЛЬ ЗАМЕТОК ===== */
if(notesPanel && notesToggle && notesClose && notesArea){

  // открыть / закрыть
  notesToggle.addEventListener("click", () => {
    notesPanel.classList.toggle("open");
  });

  notesClose.addEventListener("click", () => {
    notesPanel.classList.remove("open");
  });

  // загрузка сохранённых заметок
  const savedNotes = localStorage.getItem(NOTES_KEY);
  if(savedNotes) notesArea.value = savedNotes;

  // авто-рост textarea заметок
  function autoResizeNotes(){
    notesArea.style.height = "auto";
    notesArea.style.height = notesArea.scrollHeight + "px";
  }
  notesArea.addEventListener("input", () => {
    localStorage.setItem(NOTES_KEY, notesArea.value);
    autoResizeNotes();
  });

  window.addEventListener("load", autoResizeNotes);
}

  document.querySelectorAll('textarea.auto-resize').forEach(el => {
  function autoResize() {
    el.style.height = 'auto';
    el.style.height = el.scrollHeight + 'px';
  }
  el.addEventListener('input', autoResize);
  autoResize(); // для загрузки сохранённого текста
});


  /*Заметки*/

  // Получаем элементы
const notesPanelRight = document.getElementById('notesPanelRight');
const notesRightToggle = document.getElementById('notesRightToggle');
const notesRightClose = document.getElementById('notesRightClose');
const notesAreaRight = document.getElementById('notesAreaRight');

// Открыть/закрыть
notesRightToggle.addEventListener('click', () => {
  notesPanelRight.classList.toggle('open');
});

notesRightClose.addEventListener('click', () => {
  notesPanelRight.classList.remove('open');
});

// Сохраняем заметки во втором textarea
const NOTES_RIGHT_KEY = 'diana_notes_right';
const savedNotesRight = localStorage.getItem(NOTES_RIGHT_KEY);
if(savedNotesRight) notesAreaRight.value = savedNotesRight;

notesAreaRight.addEventListener('input', () => {
  localStorage.setItem(NOTES_RIGHT_KEY, notesAreaRight.value);
  // Авто-рост
  notesAreaRight.style.height = 'auto';
  notesAreaRight.style.height = notesAreaRight.scrollHeight + 'px';
});

// Начальное авто-растягивание
window.addEventListener('load', () => {
  notesAreaRight.style.height = 'auto';
  notesAreaRight.style.height = notesAreaRight.scrollHeight + 'px';
});

/* ===== СТАРТ ===== */
loadState();
</script>



</body>
</html>
